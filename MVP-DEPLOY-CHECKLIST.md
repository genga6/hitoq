# hitoQ MVP デプロイチェックリスト

このチェックリストは、hitoQをMVPとして本番環境にデプロイする際に必要な全ての手順を網羅しています。

## 📋 デプロイ前準備

### ✅ 1. 外部サービスの設定

- [✔] **Renderアカウント**の作成・設定完了
- [✔] **Render API Key**の取得
- [✔] **Sentryアカウント**の作成
  - [✔] バックエンド用プロジェクト作成
  - [✔] フロントエンド用プロジェクト作成
  - [✔] 各DSN情報の取得
- [✔] **Twitter Developer Account**の設定
  - [✔] OAuth 2.0アプリケーションの作成
  - [✔] Client ID & Client Secretの取得
  - [✔] Callback URLの設定 (`https://[backend-url]/auth/callback/twitter`)

### ✅ 2. GitHubリポジトリの準備

- [✔] GitHubリポジトリが公開されている
- [ ] mainブランチに最新コードがプッシュ済み
- [✔] 全ての機密情報が`.env`ファイルに分離済み
- [✔] `.gitignore`で機密ファイルが除外済み

### ✅ 3. 環境変数・設定の準備

- [✔] `terraform/terraform.tfvars`ファイルを作成
  - [✔] render_api_key
  - [✔] github_repo_url
  - [✔] db_password（強力なパスワード）
  - [✔] secret_key（32文字のランダム文字列）
  - [✔] session_secret_key（32文字のランダム文字列）
  - [✔] twitter_client_id
  - [✔] twitter_client_secret
  - [✔] sentry_dsn（バックエンド）
  - [✔] public_sentry_dsn（フロントエンド）

### ✅ 4. コード品質チェック

- [ ] バックエンドテスト実行: `cd backend && pytest`
- [ ] フロントエンドビルド確認: `cd frontend && npm run build`
- [ ] リンター実行: `cd backend && ruff check` / `cd frontend && npm run lint`
- [ ] 型チェック実行: `cd backend && mypy src/`

## 🚀 デプロイ実行

### ✅ 5. Terraformデプロイ

```bash
cd terraform
terraform init
terraform plan  # 設定確認
terraform apply  # デプロイ実行
```

- [ ] PostgreSQLデータベース作成確認
- [ ] バックエンドサービス作成確認
- [ ] フロントエンドサービス作成確認
- [ ] 出力されたURL情報を記録

### ✅ 6. デプロイ後設定

- [ ] **Twitter OAuth設定**の更新
  - Callback URLを実際のバックエンドURLに更新
- [ ] **Renderダッシュボード**で各サービスの起動確認
- [ ] **データベースマイグレーション**の実行確認

## 🔍 動作確認・テスト

### ✅ 7. 基本機能テスト

- [ ] **フロントエンドアクセス**: `https://hitoq.onrender.com`
- [ ] **バックエンドヘルスチェック**: `https://hitoq-backend.onrender.com/health`
- [ ] **Twitter OAuth認証**の動作確認
- [ ] **ユーザー登録・ログイン**の動作確認
- [ ] **プロフィール作成・編集**の動作確認
- [ ] **Q&A機能**の動作確認
- [ ] **メッセージング機能**の動作確認

### ✅ 8. エラー監視・ログ確認

- [ ] **Sentryエラー監視**の動作確認
  - バックエンドでテストエラーを発生させて確認
  - フロントエンドでテストエラーを発生させて確認
- [ ] **Renderログ**の確認
  - バックエンドサービスのログ確認
  - フロントエンドサービスのログ確認

### ✅ 9. パフォーマンス・セキュリティチェック

- [ ] **レスポンス速度**の確認
- [ ] **HTTPS**の動作確認
- [ ] **セキュリティヘッダー**の確認
- [ ] **モバイル表示**の確認
- [ ] **ブラウザ互換性**の確認

## 📊 運用準備

### ✅ 10. 監視・アラート設定

- [ ] **Sentryアラート**の設定
  - エラー率の閾値設定
  - 通知先メール設定
- [ ] **Renderアラート**の設定
  - サービス停止アラート
  - リソース使用量アラート

### ✅ 11. ドキュメント整備

- [ ] **API仕様書**の最新化
- [ ] **デプロイメント手順書**の作成
- [ ] **トラブルシューティングガイド**の作成
- [ ] **ユーザーガイド**の作成

## 🔄 運用・保守

### ✅ 12. 継続的な改善

- [ ] **パフォーマンス監視**の継続
- [ ] **ユーザーフィードバック**の収集体制
- [ ] **セキュリティアップデート**の計画
- [ ] **機能追加・改善**のロードマップ

## 📝 緊急時対応

### ✅ 13. 緊急時の連絡先・手順

- [ ] **Renderサポート**への連絡方法
- [ ] **Sentryアラート**対応手順
- [ ] **データベース復旧**手順
- [ ] **ロールバック**手順

---

## 🎯 MVP成功の判断基準

- [ ] 全ての基本機能が動作している
- [ ] エラー率 < 1%
- [ ] 平均レスポンス時間 < 2秒
- [ ] Twitter OAuth認証が安定している
- [ ] モバイル・デスクトップで正常動作
- [ ] Sentryで適切にエラー監視できている

## 💡 次のステップ（MVP後）

1. **ユーザーフィードバック収集**
2. **パフォーマンス最適化**
3. **機能拡張**
4. **スケーラビリティ改善**
5. **CI/CD パイプライン構築**

---

**このチェックリストを完了することで、hitoQのMVPが安定して運用可能な状態になります。**
