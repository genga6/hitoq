"""
Question template management for the Q&A system.
This module provides structured management of question templates.
"""

from dataclasses import dataclass
from typing import List

from src.db.tables import QuestionCategoryEnum


@dataclass
class CategoryInfo:
    """Information about a question category."""

    id: str
    label: str
    description: str = ""


@dataclass
class QuestionTemplate:
    """A template for creating a group of questions."""

    category: QuestionCategoryEnum
    title: str
    questions: List[str]
    description: str = ""


# Category information for UI display
CATEGORY_INFO = {
    QuestionCategoryEnum.self_introduction: CategoryInfo(
        id="self-introduction",
        label="自己紹介",
        description="基本的な自己紹介に関する質問",
    ),
    QuestionCategoryEnum.values: CategoryInfo(
        id="values", label="価値観", description="価値観や考え方に関する質問"
    ),
    QuestionCategoryEnum.otaku: CategoryInfo(
        id="otaku", label="趣味・創作", description="趣味や創作活動に関する質問"
    ),
    QuestionCategoryEnum.misc: CategoryInfo(
        id="misc",
        label="ライフスタイル",
        description="日常生活やライフスタイルに関する質問",
    ),
}


# Default question templates
DEFAULT_TEMPLATES = [
    # 安全な自己紹介系（個人特定リスクを排除）
    QuestionTemplate(
        category=QuestionCategoryEnum.self_introduction,
        title="あなたを知る30の質問",
        description="プライバシーに配慮した安全な自己紹介質問集",
        questions=[
            "理想の朝の過ごし方は？",
            "好きな色とその理由は？",
            "最も心地よいと感じる季節は？",
            "好きな食べ物の系統は？（和食、洋食、中華など）",
            "休日の理想的な時間の使い方は？",
            "好きな音楽のジャンルは？",
            "読書派？映画派？それとも音楽派？",
            "インドア派？アウトドア派？",
            "早起き派？夜更かし派？",
            "コーヒー派？紅茶派？それとも他の飲み物派？",
            "好きな天気は？",
            "リラックスする時の過ごし方は？",
            "集中したい時はどんな環境が好き？",
            "好きな香りや匂いは？",
            "心地よいと感じる音は？",
            "好きな動物は？",
            "理想的な部屋の雰囲気は？",
            "好きな時間帯は？",
            "エネルギーが湧いてくる瞬間は？",
            "癒される場所のタイプは？",
            "好きな食感は？",
            "集中力を高める方法は？",
            "気分転換の方法は？",
            "心を落ち着かせる方法は？",
            "創作意欲が湧く時は？",
            "好きな移動手段は？",
            "理想の服装スタイルは？",
            "好きな温度は？（暖かい、涼しいなど）",
            "心地よい明るさは？",
            "一人の時間と人といる時間、どちらが好き？",
        ],
    ),
    # 価値観・思考系
    QuestionTemplate(
        category=QuestionCategoryEnum.values,
        title="価値観を知る40の質問",
        description="あなたの価値観や考え方を深く知るための質問集",
        questions=[
            "人生で最も大切にしている価値観は？",
            "友人関係で重要だと思うことは？",
            "幸せを感じる瞬間はどんな時？",
            "ストレス解消法は？",
            "モチベーションの源は？",
            "新しいことを始める時の心構えは？",
            "困った時はどう対処する？",
            "成功の定義は？",
            "失敗から学んだ大切なことは？",
            "時間の使い方で意識していることは？",
            "コミュニケーションで大切なことは？",
            "チームワークで重視することは？",
            "リーダーシップについて思うことは？",
            "学び続けたいことは？",
            "自分の強みは？",
            "成長のために意識していることは？",
            "理想的な人間関係とは？",
            "信頼関係を築くために大切なことは？",
            "意見が違う人との向き合い方は？",
            "自分らしさとは？",
            "変化に対する考え方は？",
            "完璧主義？それとも適度主義？",
            "計画派？行き当たりばったり派？",
            "競争と協力、どちらを重視する？",
            "伝統と革新、どちらに魅力を感じる？",
            "安定と挑戦、どちらを選ぶ？",
            "理想と現実のバランスの取り方は？",
            "自分の価値観で譲れないものは？",
            "他人の価値観を理解するために心がけることは？",
            "人生の優先順位の決め方は？",
            "後悔を避けるために意識していることは？",
            "自分を励ます方法は？",
            "人との距離感で気をつけていることは？",
            "感情のコントロール方法は？",
            "直感と論理、どちらを重視する？",
            "過去・現在・未来、どの時間軸を重視する？",
            "個性と協調性のバランスの取り方は？",
            "自分の考えを伝える時に心がけることは？",
            "相手の話を聞く時に意識することは？",
            "人生で大切にしたい体験は？",
        ],
    ),
    # オタク・趣味系
    QuestionTemplate(
        category=QuestionCategoryEnum.otaku,
        title="趣味を語る50の質問",
        description="あなたの趣味や好きなことについて詳しく教えてください",
        questions=[
            "好きなアニメのジャンルは？",
            "漫画を読む時のこだわりは？",
            "推し活の楽しみ方は？",
            "ゲームで好きなジャンルは？",
            "創作活動で興味があるものは？",
            "好きなYouTubeのジャンルは？",
            "音楽を聴くお気に入りのシチュエーションは？",
            "映画の好みは？",
            "スポーツで好きなものは？",
            "コレクションしているものは？",
            "趣味に使う時間はどのくらい？",
            "趣味を始めたきっかけは？",
            "趣味仲間との交流方法は？",
            "新しい趣味を見つける方法は？",
            "趣味にかける情熱の源は？",
            "好きな作品の魅力を語るなら？",
            "創作するか鑑賞するか、どちら派？",
            "一人で楽しむか、みんなで楽しむか？",
            "深く掘り下げるか、広く浅くか？",
            "オンラインかオフラインか、どちらで楽しむ？",
            "トレンドを追うか、マイペースか？",
            "完璧主義か、楽しければOKか？",
            "ストーリー重視か、キャラクター重視か？",
            "グラフィック重視か、システム重視か？",
            "王道か、マイナーか？",
            "シリーズものか、単発ものか？",
            "リアルタイムか、まとめて楽しむか？",
            "原作か、アニメ化・映像化作品か？",
            "公式か、二次創作か？",
            "新作か、名作か？",
            "国内作品か、海外作品か？",
            "メジャーか、インディーズか？",
            "長編か、短編か？",
            "ハッピーエンドか、ビターエンドか？",
            "コメディか、シリアスか？",
            "ファンタジーか、現実的か？",
            "アクションか、日常系か？",
            "恋愛要素ありか、なしか？",
            "謎解き要素ありか、なしか？",
            "バトル要素ありか、なしか？",
            "成長ストーリーか、完成されたキャラか？",
            "複雑な設定か、シンプルな設定か？",
            "続きものか、1話完結か？",
            "感動系か、笑える系か？",
            "考察したくなる作品か、素直に楽しめる作品か？",
            "話題性重視か、個人的な好み重視か？",
            "キャラクターデザイン重視か、ストーリー重視か？",
            "声優さんを意識するか、キャラクターのみ見るか？",
            "音楽も重視するか、映像のみ重視するか？",
            "趣味を通じて得られた一番の収穫は？",
        ],
    ),
    # ライフスタイル・日常系
    QuestionTemplate(
        category=QuestionCategoryEnum.misc,
        title="ライフスタイル診断30の質問",
        description="あなたの日常や生活スタイルについて教えてください",
        questions=[
            "理想の1日のスケジュールは？",
            "朝のルーティンで大切にしていることは？",
            "夜のリラックス方法は？",
            "週末の過ごし方のパターンは？",
            "家での快適な過ごし方は？",
            "外出時のお気に入りスポットのタイプは？",
            "食事で大切にしていることは？",
            "健康管理で意識していることは？",
            "睡眠で気をつけていることは？",
            "運動習慣はある？",
            "ストレッチやリラクゼーションの習慣は？",
            "デジタルデトックスを意識する？",
            "情報収集の方法は？",
            "SNSとの付き合い方は？",
            "買い物をする時の基準は？",
            "部屋の整理整頓のコツは？",
            "季節の変わり目で楽しみにしていることは？",
            "年中行事で大切にしているものは？",
            "プレゼント選びで重視することは？",
            "記念日の過ごし方は？",
            "写真を撮る頻度は？",
            "日記や記録をつける習慣は？",
            "新しい場所を探検するのは好き？",
            "地元愛はある？",
            "旅行スタイルは？（計画派？自由派？）",
            "お気に入りの移動手段は？",
            "天気によって気分は変わる？",
            "季節感を感じる瞬間は？",
            "小さな贅沢はどんなもの？",
            "自分にとってのご褒美は？",
        ],
    ),
    # 学習・成長系
    QuestionTemplate(
        category=QuestionCategoryEnum.misc,
        title="学びと成長に関する25の質問",
        description="学習や自己成長に対する考え方を知る質問集",
        questions=[
            "新しいことを学ぶ時のモチベーションは？",
            "効果的な学習方法は？",
            "集中力を維持するコツは？",
            "記憶に残りやすい学び方は？",
            "理論派？実践派？",
            "一人で学ぶ？みんなで学ぶ？",
            "体系的に学ぶ？興味の赴くままに学ぶ？",
            "深く学ぶ？広く学ぶ？",
            "本で学ぶ？動画で学ぶ？体験で学ぶ？",
            "すぐに活用する？じっくり理解してから活用する？",
            "完璧に理解してから進む？とりあえず進んでみる？",
            "ノートを取る派？頭で記憶する派？",
            "復習を重視する？新しいことを重視する？",
            "基礎を固める？応用から入る？",
            "先生から学ぶ？独学する？",
            "計画的に学ぶ？直感的に学ぶ？",
            "競争を意識する？自分のペースを重視する？",
            "結果を重視する？過程を重視する？",
            "短期集中？長期継続？",
            "朝学習？夜学習？",
            "静かな環境？適度な雑音がある環境？",
            "デジタル？アナログ？",
            "質問することを重視する？自分で考えることを重視する？",
            "失敗を恐れる？失敗から学ぶことを重視する？",
            "学んだことをどう活かしたい？",
        ],
    ),
    # 人間関係系
    QuestionTemplate(
        category=QuestionCategoryEnum.values,
        title="人間関係に関する35の質問",
        description="人との関わり方や考え方について深掘りする質問集",
        questions=[
            "理想的な友人関係とは？",
            "信頼できる人の特徴は？",
            "良好な関係を築くために心がけていることは？",
            "意見が合わない時の対処法は？",
            "相手の気持ちを理解するために意識することは？",
            "自分の気持ちを伝える時のコツは？",
            "聞き上手？話し上手？",
            "グループの中での自分の役割は？",
            "リーダータイプ？サポータータイプ？",
            "積極的にコミュニケーションを取る？待つタイプ？",
            "大勢の中にいる？少数精鋭？",
            "深い関係？広い関係？",
            "安定した関係？刺激的な関係？",
            "似た価値観の人？違う価値観の人？",
            "同世代？年上？年下？",
            "オンライン？オフライン？",
            "仕事関係？プライベート関係？",
            "地元の人？様々な地域の人？",
            "同じ趣味の人？違う趣味の人？",
            "感情を共有する？論理的に話し合う？",
            "アドバイスを求める？話を聞いてもらう？",
            "計画を一緒に立てる？自然体で付き合う？",
            "お互いを高め合う？リラックスできる？",
            "新しい発見がある？安心できる？",
            "刺激的な会話？穏やかな会話？",
            "真面目な話？楽しい話？",
            "将来の話？今の話？",
            "個人的な話？一般的な話？",
            "問題解決型？共感型？",
            "建設的な議論？和やかな雑談？",
            "挑戦的な話題？安全な話題？",
            "新しい視点？共通の視点？",
            "質問する？答える？",
            "教える？教わる？",
            "人間関係で最も大切にしていることは？",
        ],
    ),
    # 創作・表現系
    QuestionTemplate(
        category=QuestionCategoryEnum.otaku,
        title="創作と表現に関する30の質問",
        description="創作活動や自己表現について詳しく知る質問集",
        questions=[
            "創作活動はする？",
            "どんな形で自分を表現するのが好き？",
            "インスピレーションを得る瞬間は？",
            "創作意欲が湧く環境は？",
            "完成させる？途中で満足する？",
            "オリジナル？二次創作？",
            "一人で創作？協力して創作？",
            "計画的に創作？直感的に創作？",
            "完璧主義？とりあえず形にする？",
            "他の人に見せる？自分だけで楽しむ？",
            "フィードバックを求める？自分の感覚を信じる？",
            "トレンドを意識する？自分らしさを重視する？",
            "技術向上を重視する？表現したいことを重視する？",
            "長編？短編？",
            "シリアス？コメディ？",
            "リアル？ファンタジー？",
            "ストーリー重視？ビジュアル重視？",
            "キャラクター重視？世界観重視？",
            "メッセージ性重視？エンターテイメント重視？",
            "感情表現重視？技術表現重視？",
            "革新的？古典的？",
            "シンプル？複雑？",
            "明るい？暗い？",
            "希望的？現実的？",
            "個人的？普遍的？",
            "静的？動的？",
            "繊細？大胆？",
            "抽象的？具体的？",
            "創作を通じて伝えたいことは？",
            "創作活動で得られる一番の喜びは？",
        ],
    ),
    # 仕事・キャリア系
    QuestionTemplate(
        category=QuestionCategoryEnum.values,
        title="働き方とキャリアに関する30の質問",
        description="仕事に対する価値観や理想の働き方について知る質問集",
        questions=[
            "理想の働き方は？",
            "仕事で最も重視することは？",
            "チームワークで大切なことは？",
            "リーダーシップで意識することは？",
            "スキルアップで興味がある分野は？",
            "効率重視？丁寧さ重視？",
            "スピード重視？品質重視？",
            "個人作業？チーム作業？",
            "ルーティンワーク？変化のある仕事？",
            "専門性を深める？幅広いスキルを身につける？",
            "安定？挑戦？",
            "大企業？中小企業？",
            "リモートワーク？オフィスワーク？",
            "フレックス？固定時間？",
            "長期プロジェクト？短期プロジェクト？",
            "クリエイティブ？ロジカル？",
            "人と関わる？一人で集中？",
            "ゼロから作る？改善・改良する？",
            "計画を立てる？実行する？",
            "分析する？直感で判断する？",
            "教える？学ぶ？",
            "サポートする？リードする？",
            "安全性重視？革新性重視？",
            "プロセス重視？結果重視？",
            "短期成果？長期的な影響？",
            "競争？協力？",
            "専門分野？総合的？",
            "理論？実践？",
            "国内？グローバル？",
            "仕事を通じて実現したい理想は？",
        ],
    ),
    # エンターテイメント系
    QuestionTemplate(
        category=QuestionCategoryEnum.otaku,
        title="エンタメ好きのための40の質問",
        description="映画、音楽、ゲーム、書籍など幅広いエンタメについて",
        questions=[
            "映画館派？家で鑑賞派？",
            "字幕派？吹き替え派？",
            "邦画派？洋画派？",
            "最新作？名作？",
            "アクション？ドラマ？コメディ？ホラー？",
            "一人で見る？みんなで見る？",
            "集中して見る？ながら見？",
            "レビューを読む？先入観なしで見る？",
            "予告編を見る？見ない？",
            "続編がある？単発？",
            "音楽はどこで聴く？",
            "プレイリスト派？アルバム通し派？",
            "新しい音楽を探す？お気に入りをリピート？",
            "歌詞重視？メロディ重視？",
            "ライブに行く？音源で楽しむ？",
            "邦楽？洋楽？",
            "メジャー？インディーズ？",
            "ソロアーティスト？バンド？",
            "アップテンポ？バラード？",
            "懐かしい曲？最新の曲？",
            "ゲームはどのプラットフォームで？",
            "一人でプレイ？みんなでプレイ？",
            "ストーリー重視？システム重視？",
            "RPG？アクション？パズル？シミュレーション？",
            "じっくりやり込む？サクッとクリア？",
            "オンライン？オフライン？",
            "攻略情報を見る？自力で進める？",
            "コンプリートする？メインだけクリア？",
            "新作？レトロゲーム？",
            "和ゲー？洋ゲー？",
            "本は紙派？電子書籍派？",
            "小説？ノンフィクション？",
            "長編？短編？",
            "シリーズもの？単発？",
            "日本の作家？海外の作家？",
            "古典？現代？",
            "ベストセラー？隠れた名作？",
            "じっくり読む？速読する？",
            "静かな場所？適度に音がある場所？",
            "エンタメを楽しむ上で最も大切にしていることは？",
        ],
    ),
]


def get_category_title(category: QuestionCategoryEnum) -> str:
    """Get the display title for a question category."""
    # Find the title from templates first
    for template in DEFAULT_TEMPLATES:
        if template.category == category:
            return template.title

    # Fallback to default titles
    title_map = {
        QuestionCategoryEnum.self_introduction: "自己紹介のための20の質問",
        QuestionCategoryEnum.values: "価値観を知る30の質問",
        QuestionCategoryEnum.otaku: "オタクを語る50の質問",
        QuestionCategoryEnum.misc: "その他",
    }
    return title_map.get(category, "Q&A")


def get_default_templates() -> List[QuestionTemplate]:
    """Get all question templates."""
    return DEFAULT_TEMPLATES


def get_template_by_category(category: QuestionCategoryEnum) -> QuestionTemplate | None:
    """Get a specific template by category."""
    for template in DEFAULT_TEMPLATES:
        if template.category == category:
            return template
    return None


def get_category_info(category: QuestionCategoryEnum) -> CategoryInfo:
    """Get category information for UI display."""
    return CATEGORY_INFO[category]


def get_all_category_info() -> dict[str, CategoryInfo]:
    """Get all category information."""
    return {info.id: info for info in CATEGORY_INFO.values()}
